{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "Web Thing Label Schema",
  "definitions": {
    "rfc3986uri": {
      "description": "https://tools.ietf.org/html/rfc3986#page-50",
      "type": "string",
      "pattern": "^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(%5C?([^#]*))?(#(.*))?"
    },
    "valueDefinition": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "A human-readable caption for this value"
        },
        "description": {
          "type": "string",
          "description": "A human-readable description of this value"
        },
        "type": {
          "enum": [
            "integer",
            "float",
            "boolean",
            "string"
          ],
          "description": "The type of this value. The supported types are integer, float, boolean, string"
        },
        "unit": {
          "type": "string",
          "description": "The unit of this value, using one of the full names defined in the International System of Units. Example: \"meter per second squared\""
        },
        "required": {
          "type": "boolean",
          "default": true,
          "description": "Specifies whether this value is required or optional. If omitted, the default is true."
        },
        "minValue": {
          "type": "number",
          "description": "The minimal concrete value that this value can take"
        },
        "maxValue": {
          "type": "number",
          "description": "The maximal concrete value of this value"
        },
        "enum": {
          "type": "object",
          "patternProperties": {
            "$[A-Z]*^": {
              "type": "string"
            }
          },
          "description": "Specifies a set of concrete values that this value can take, e.g. {\"LOCK\":\"Locks the door.\", \"UNLOCK\":\"unlocks the door.\"}",
          "additionalProperties": false
        },
        "customFields": {
          "type": "object"
        }
      },
      "additionalProperties": false
    },
    "link": {
      "type": "object",
      "properties": {
        "link": {
          "$ref": "#/definitions/rfc3986uri"
        },
        "title": {
          "description": "A concise description of the link",
          "type": "string"
        }
      }
    }
  },
  "type": "object",
  "properties": {
    "id": {
      "$ref": "#/definitions/rfc3986uri"
    },
    "name": {
      "type": "string"
    },
    "description": {
      "type": "string"
    },
    "createdAt": {
      "type": "string",
      "format": "date-time"
    },
    "updatedAt": {
      "type": "string",
      "format": "date-time"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "uniqueItems": true
    },
    "customFields": {
      "type": "object"
    },
    "links": {
      "type": "object",
      "properties": {
        "model": {
          "$ref": "#/definitions/link"
        },
        "properties": {
          "allOf": [
            {
              "$ref": "#/definitions/link"
            },
            {
              "properties": {
                "resources": {
                  "type": "object",
                  "patternProperties": {
                    "^.+$": {
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "description": {
                          "type": "string"
                        },
                        "values": {
                          "type": "object",
                          "patternProperties": {
                            "^.+$": {
                              "allOf": [
                                {
                                  "properties": {
                                    "name": {
                                      "type": "string"
                                    },
                                    "description": {
                                      "type": "string"
                                    }
                                  }
                                },
                                {
                                  "$ref": "#/definitions/valueDefinition"
                                }
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "additionalProperties": false
                }
              }
            }
          ]
        },
        "actions": {
          "allOf": [
            {
              "$ref": "#/definitions/link"
            },
            {
              "properties": {
                "resources": {
                  "type": "object",
                  "patternProperties": {
                    "^.+$": {
                      "type": "object",
                      "properties": {
                        "values": {
                          "type": "object",
                          "patternProperty": {
                            "^.+$":{"$ref": "#/definitions/valueDefinition"}
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          ]
        },
        "product": {
          "$ref": "#/definitions/link"
        },
        "type": {
          "$ref": "#/definitions/link"
        },
        "help": {
          "$ref": "#/definitions/link"
        },
        "ui": {
          "$ref": "#/definitions/link"
        }
      }
    }
  }
}