<!DOCTYPE html>
<html>
<head>
    <title>Web Thing Model</title>
    <meta charset='utf-8'>
    <script src='https://www.w3.org/Tools/respec/respec-w3c-common'
            async class='remove'></script>
    <script class='remove'>
        var respecConfig = {
            specStatus: 'unofficial',
            shortName: 'wot-model',
            additionalCopyrightHolders: 'Copyright © 2015 EVRYTHNG',
            editors: [
                {
                    name: 'Vlad Trifa',
                    company: 'EVRYTHNG',
                    companyURL: 'http://evrythng.com/'
                },
                {
                    name: 'Dominique Guinard',
                    company: 'EVRYTHNG',
                    companyURL: 'http://evrythng.com/'
                },
                {
                    name: 'David Carrera',
                    company: 'Barcelona Supercomputing Center',
                    companyURL: 'http://bsc.es/'
                },
                {
                    name: 'François Daoust',
                    company: 'W3C',
                    companyURL: 'http://www.w3.org'
                }
            ],
            logos: [
                {
                    src: 'http://www.w3.org/Icons/w3c_home',
                    url: 'http://www.w3.org',
                    alt: 'W3C',
                    width: 72,
                    height: 48
                },
                {
                    src: 'http://www.w3.org/Icons/member_subm',
                    url: 'http://www.w3.org/Submission/',
                    alt: 'W3C Member Submission',
                    width: 211,
                    height: 48
                }
            ],
            localBiblio: {
                'REST': {
                    title: 'Architectural Styles and the Design of Network-based Software Architectures',
                    href: 'http://roy.gbiv.com/pubs/dissertation/top.htm',
                    authors: [
                        'Roy Thomas Fielding'
                    ],
                    status: 'Doctoral Dissertation',
                    date: 'September 2000'
                },
                'SI': {
                    title: 'International System of Units (SI)',
                    href: 'http://physics.nist.gov/cuu/Units/units.html'
                },
                'WoTBook': {
                    title: 'Building the Web of Things',
                    href: 'http://book.webofthings.io',
                    authors: [
                        'Dominique Guinard',
                        'Vlad Trifa'
                    ],
                    date: 'May 2015'
                },
                'WoTPaper': {
                    title: 'Towards the Web of Things: Web Mashups for Embedded Devices',
                    href: 'http://www.vs.inf.ethz.ch/publ/bibtex.html?file=papers/dguinard_09_WOTMashups',
                    authors: [
                        'Dominique Guinard',
                        'Vlad Trifa'
                    ],
                    status: 'WWW 2009 Conference Paper',
                    date: 'April 20, 2009'
                }
            }
        };
    </script>
    <style type="text/css">
        table {
            border: 1px solid grey;
        }
    </style>
</head>
<body>
<section id='abstract'>
    <p>
        This document proposes the basis of a common model to describe the virtual counterpart of physical objects in
        the Web of Things.
        It defines a model and Web API for Things to be followed by anyone wanting to create a product, device, service,
        or application for the Web of Things. This document considers the definition of the Web of Things (WoT) proposed
        in [[WoTPaper]] and [[WoTBook]], i.e., the Application layer of the Internet of Things. The model and
        protocols proposed here aim at making the interaction between Things in the Internet of Things accessible
        through Web standards to facilitate the implementation of Web applications making use or retrieving data from
        real-world objects.
    </p>
</section>

<section id='sotd'>
    <p>
        This document is intended to be submitted as a W3C Member Submission and is based on work undertaken within the
        <a href="http://www.compose-project.eu/">COMPOSE</a> European project.
    </p>
</section>

<section class='informative'>
    <h2>Introduction</h2>

    <p>
        The following guidelines and recommendations aim at ensuring interoperability across all entities on the Web of
        Things. Unlike other custom (non-Web) protocols used for machine-to-machine communications that create a
        “parallel universe” to the existing Web; the Web of Things as described here is designed to be seamlessly
        integrated to the existing Web so it can fully leverage its infrastructure and standards to minimize
        integrations across applications and systems.
    </p>

    <p>
        The proposal is composed of three sub-parts:
    </p>
    <ul>
        <li>
            <strong>Integration Patterns</strong>. This section discusses the way Things are integrated to the Web. It
            proposes 3 different patterns, Direct Connectivity, Gateway Based Connectivity, Cloud Based Connectivity.
        </li>
        <li>
            <strong>Web Things (WT) Requirements</strong>. This part does not introduce any specific data naming
            conventions of domain-specific models. It is solely composed of multiple constraints and recommendations on
            how the protocol should be implemented so that any entity on the Web of Things can easily interact with each
            other. Respecting these requirements turns a Web server into a Web Thing.
        </li>
        <li>
            <strong>Web Things Model</strong>. Once a Web Thing follows the conventions defined above, it is then
            capable to read and exchange data with any other entities of the Web of Things. However, it does not mean it
            can “understand” what the object is, what data or services it offers, etc. Therefore, the second component
            of this specification proposes RESTful Web protocol with a set of resources, data models, payload syntax and
            semantic extensions that Web Thing and applications should follow. Respecting these requirements turns a Web
            Thing into an Extended Web Thing. Implementing semantic extensions (via JSON-LD) turns the Extended Web
            Thing into a Semantic Web Thing.
        </li>
    </ul>
    <figure id="wot-levels">
        <img src="wot-levels.png"
             alt="Web Thing Model levels build on top of each other, from a Web Thing that implement the requirements to the Extended Web Thing and Semantic Web Thing"
             width="800"/>
        <figcaption>Web Thing Model levels</figcaption>
    </figure>
</section>

<section id='conformance'>
    <p>
        This specification has two classes of products:
    </p>
    <dl>
        <dt><dfn>Web Thing</dfn></dt>
        <dd>A Web Thing is a digital representation of a physical object accessible via a RESTful Web API. Examples of
            Web Things are: an Arduino board, a garage door, a bottle of soda, a building, a TV, etc. The API of the Web
            Thing can be hosted on the Thing itself or on an intermediate host in the network such as a Gateway or a
            Cloud service (for Things that aren't accessible through the Internet).
        </dd>
        <p>
            A <a>Web Thing</a> conforms to this specification if it follows the statements defined in <a
                href="#web-things-requirements"></a>.
        </p>
        <dt><dfn>Extended Web Thing</dfn></dt>
        <dd>A <a>Extended Web Thing</a> that also supports the REST API and data model defined in this specification,
            thus enabling its automatic inclusion in more complex systems.
        </dd>
    </dl>
    <p>
        An <a>Extended Web Thing</a> conforms to this specification if it follows the statements defined in <a
            href="#web-things-requirements"></a> and <a href="#web-things-model"></a>.
    </p>
</section>

<section>
    <h2>Terminology</h2>

    <p>
        The following terms are considered in this proposal:
    </p>
    <dl>
        <dt><dfn>Client</dfn></dt>
        <dd>A <a>Client</a> refers to any physical or digital entity that can interact with a Web Thing. This can be a
            mobile application, a Web browser, a proxy, a desktop application, but also another Web Things (e.g., in the
            case of Machine to Machine communication).
        </dd>

        <dt><dfn>Property</dfn>
        <dt>
        <dd>A <a title="property">Property</a> is a variables of a Web Thing. Properties represent the internal state of a  <a>Web Thing</a>. Clients can
            subscribe to properties to receive a notification message when specific conditions are met (e.g. value of
            one or more properties changed).
        </dd>

        <dt><dfn>Action</dfn></dt>
        <dd><a title="action">Actions</a> Actions are functions offered by a <a>Web Thing</a>. A Client invokes a function on a <a>Web Thing</a> which initiates a state transition by sending it an Action. Examples of Actions are “open” or “close” for a garage door, “enable” or
            “disable” for a smoke alarm, “check-in” or “scan” for a bottle of soda or a place. The direction of an <a>Action</a>
            is from the <a>Client</a> to the <a>Web Thing</a>.
        </dd>

        </dt>
        </dl>
</section>

<section>
    <h2>Web Things integration patterns</h2>

    <p>
        This part looks into the different ways of integrating physical objects to the Web to make them <a
            title="Web Thing">Web Things</a>. Once a pattern has been choosen, the server of a <a>Web Thing</a> should
        follow the <a href="#web-things-requirements">Web Things Requirements</a> and the resources and payloads it uses
        should follow the <a href="#web-things-model">Web Things Model</a>.
    </p>

    <p>
        Some physical entities might not expose a Web API themselves for various reasons (e.g., a ZigBee sensor node, or
        an heart rate monitor accessible over Bluetooth only), in which case they are not <a title="Web Thing">Web
        Things</a> as such, but they can use another <a>Web Thing</a> as a proxy or gateway to provide a Web API for
        them, therefore turning them into Web Things.
    </p>

    <p>
        While the three integration patterns described below need to be taken into account it is worth noting that the
        requirements and model apply regardless of the integration pattern of choice.
    </p>

    <section>
        <h2><dfn>Direct</dfn> connectivity</h2>

        <p>
            In the most straightforward case, a <a>Web Thing</a> is simply a Web API that <a title="Client">Clients</a>
            send requests to. In some cases, the <a>Client</a> and the <a>Web Thing</a> can be on the same network or on
            different networks. In both cases, you are sending the same request to a <a>Web Thing</a>, the only
            difference is the URL to which you are sending the request (and obviously how the lamp gets the message).
        </p>
        <figure>
            <img src="integration-direct.png"
                 alt="When a Web Thing exposes a Web API, Clients can directly connect to it, potential through a local address if they are both on the same network"
                 width="800"/>
            <figcaption>Direct connectivity between a Client and a Web Thing</figcaption>
        </figure>
    </section>

    <section>
        <h2><dfn>Gateway</dfn> proxied connectivity</h2>

        <p>
            Gateway based connectivity is used when a Thing cannot offer a Web API directly. In this case an
            intermediate, the gateway, exposes a Web API on its behalf, therefore acting as a proxy (or gateway
            depending on the complexity/layer of the translation).
        </p>
        <figure>
            <img src="integration-gateways.png"
                 alt="When a Web Thing cannot expose a Web API directly, Clients connect to it through a Gateway that exposes the Web API on their behalf"
                 width="800"/>
            <figcaption>Gateway-based connectivity between a Client and a Web Thing</figcaption>
        </figure>
    </section>

    <section>
        <h2><dfn>Cloud</dfn> proxied connectivity</h2>

        <p>
            This third case is similar to <a href="#gateway-based-connectivity"></a>. However, in this case the gateway
            is a cloud service and not another device in situ.
        </p>
        <figure>
            <img src="integration-cloud.png"
                 alt="A cloud service may expose the Web API of a Web Thing for Clients to connect to it" width="800"/>
            <figcaption>Cloud-based connectivity between a Client and a Web Thing</figcaption>
        </figure>
    </section>
</section>

<section>
    <h2>Web Things requirements</h2>

    <p>
        This part defines a set of rules for implementing <a title="Web Thing">Web Things</a>. It assumes that an <a
            href="#web-things-integration-pattern">Integration Pattern</a> was chosen.
    </p>
    <section>
        <h2>Level 0 – MUST</h2>

        <p>
            This section defines the Level 0 requirements – all of which MUST be in place in any <a>Web Thing</a>
            implementation, as all <a title="Client">Clients</a> will expect these constraints.
        </p>

        <section>
            <h2>R0.1 – A <a>Web Thing</a> MUST at least be an HTTP/1.1 server</h2>

            <p>
                All <a title="Web Thing">Web Things</a> MUST support communication over HTTP/1.1 [[!RFC2616]]. When
                possible, <a title="Web Thing">Web Things</a> SHOULD also support HTTP/2 [[!RFC7540]].
            </p>

            <p class="note">
                HTTP/1.1 is the most widely spread protocol over the Web and virtually any HTTP client or server
                implementation supports it, therefore it is likely that the majority of clients might not support HTTP/2
                as of yet. This can be implemented directly on the <a>Web Thing</a> or can be provided via a proxy (see
                Integration Patterns).
            </p>

            <p class="note">
                As a consequence, while <a title="Client">Clients</a> should not expect support for HTTP/2,
                communication with a <a>Web Thing</a> using HTTP/1.1 is always possible.
            </p>
        </section>

        <section>
            <h2>R0.2 – A <a>Web Thing</a> MUST have a root resource accessible via an HTTP URL</h2>

            <p>
                A <a>Web Thing</a> MUST have a so-called “root resource” identified by a HTTP URL (uses the HTTP
                protocol, therefore starts with <code>http://</code> or <code>https://</code>) that acts as the entry
                point for the <a>Web Thing</a> and enables the interaction with it. This root resource makes the <a>Web
                Thing</a> both uniquely identifiable and addressable over a network so that <a
                    title="Client">Clients</a> can interact with it.
            </p>

            <p>
                If the <a>Web Thing</a> is a device connected on a LAN (e.g. a printer, a lamp, etc.), the root URL of a
                <a>Web Thing</a> SHOULD be its IP address and standard HTTP port, so that, knowing only the IP address
                of a networked device that is a <a>Web Thing</a>, a <a>Client</a> can send an HTTP GET request on that
                IP address over the default port (80 for HTTP, 443 for HTTPS) to retrieve a representation of the Web
                Thing. This feature is envisioned to facilitate discovery of devices at the network level, without
                requiring an additional protocol.
            </p>

            <p class="note">
                A <a>Web Thing</a> does not need to be publicly accessible over the Internet, as some Web of Things
                scenarios might only work within a local area network (LAN) as defined above. This means a root URL does
                not need to be public and can be simply the local IP address of a device. The Root URL of a Web Thing is
                referred to as {wt} throughout this document.
            </p>
          <pre class="example" title="Valid root URLs" highlight="true">
            http://gateway.api.com/devices/TV
            http://kitchen-raspberry.device-lab.co.uk
            https://192.168.10.10:9002
            https://kitchen:3000/fridge/root
          </pre>
        </section>

        <section>
            <h2>R0.3 – A <a>Web Thing</a> MUST support <code>GET</code>, <code>POST</code>, <code>PUT</code> and <code>DELETE</code>
                HTTP verbs</h2>

            <p>
                The Web of Things aims to maximise interoperability by exposing the services of Things using REST
                [[REST]]. For this idea to come to reality, supporting certain HTTP verbs of the specification is
                required. Considering that the REST paradigm is based on resources and <abbr
                    title="Create, Read, Update and Delete">CRUD</abbr> operations on them, a <a>Web Thing</a> MUST
                support <code>GET</code> for reading operations, <code>POST</code> for creation, <code>PUT</code> for
                updates and state changes, and <code>DELETE</code> for removal.
            </p>


        </section>

        <section>
            <h2>R0.4 – A <a>Web Thing</a> MUST implement HTTP status codes <code>200</code>, <code>400</code>,
                <code>500</code></h2>

            <p>
                Proper usage of HTTP/1.1 error codes is advisable. However, considering that some devices are
                restricted, only the following subset is mandatory:
            </p>
            <ul>
                <li><strong>2XX Success</strong>. Returned for any successful action. The <a>Web Thing</a> MUST at least
                    support the 200 OK response.
                </li>
                <li><strong>4XX Client Error</strong>. This should be returned for any error due to the client that sent
                    the request (from a wrong URL, to invalid authentication, or incorrect parameter). The <a>Web
                        Thing</a> MUST at least support the 400 Bad Request error code.
                </li>
                <li><strong>5XX Server Error</strong>. This should be used for any error on the <a>Web Thing</a> side
                    when a request was valid but cannot be processed at this time for any reason, e.g. the <a>Web
                        Thing</a> has a server error, etc. The <a>Web Thing</a> MUST at least support the 500 Internal
                    Server Error error code.
                </li>
            </ul>

        </section>

        <section>
            <h2>R0.5 – A <a>Web Thing</a> MUST support JSON as default representation</h2>

            <p>
                A <a>Web Thing</a> MUST always accept a valid JSON document [[!RFC7159]] as payload for request and
                always return a JSON representation when requested. If no <code>Accept:</code> HTTP header is specified
                in the request (or if the format is unknown or not supported), the <a>Web Thing</a> SHOULD return an
                appropriate error code, but it also MAY return JSON as default. Fields in JSON objects should follow the camelCase convention starting with a lowerCase letter (e.g., backColor) or a special character (e.g., _customRealtion).
            </p>

            <p>
                A <a>Web Thing</a> MAY support additional formats.
            </p>

            <p class="note">
                A consequence of supporting JSON is that UTF-8 is the default encoding for payloads (see <a
                    href="https://tools.ietf.org/html/rfc7159#section-8.1">Character Encoding</a> in the JSON
                specification [[!RFC7159]])
            </p>
        </section>

        <section>
            <h2>R0.6 – A <a>Web Thing</a> MUST support <code>GET</code> on its root URL</h2>

            <p>
                Because they all have a unique root URL and sometimes it is all we know about them, <a
                    title="Web Thing">Web Things</a> MUST respond to HTTP <code>GET</code> requests on their root URL
                with their basic representation, so that <a title="Client">Clients</a> can use and understand it.
            </p>

            <p class="note">
                The basic representation returned by an <a>Extended Web Thing</a> is defined in <a
                    href="#web-things-model"></a>
            </p>
        </section>
    </section>

    <section>
        <h2>Level 1 – SHOULD</h2>

        <p>
            Unless there are technical or practical limitations for not adhering to Level 1 constraints, <a
                title="Web Thing">Web Things</a> SHOULD support the following constraints.
        </p>

        <section>
            <h2>R1.1 – A <a>Web Thing</a> SHOULD use secure HTTP connections (HTTPS)</h2>

            <p>
                Ideally, <a>Web Thing</a> SHOULD support secure connections with HTTP over TLS [[!RFC5246]]. The ideal
                case for security is to support only HTTP over TLS. <a>Web Thing</a> that are exposed on the Internet
                MUST always implement HTTP over TLS.
            </p>

            <p>
                <a title="Web Thing">Web Things</a> MAY use other security mechanisms if they want to (in addition or in
                place of HTTPS). In some cases, it might be impossible or impractical to implement HTTPS over TLS (for
                example in pure intranet scenario), in which case using another security mechanism is still highly
                recommended.
            </p>
        </section>

        <section>
            <h2>R1.2 – A <a>Web Thing</a> SHOULD implement the WebSocket Protocol</h2>

            <p>
                Clients SHOULD be able to subscribe to notifications from <a>Web Thing</a> using a Publish/Subscribe
                (Pub/Sub) pattern implemented using the WebSocket protocol [[!RFC6455]].
            </p>
        </section>

        <section>
            <h2>R1.3 – A <a>Web Thing</a> SHOULD support the Web Things model</h2>

            <p>
                If possible, every <a>Web Thing</a> SHOULD implement the <a href="#web-things-model">Web Things
                Model</a>. It is not essential to use it for a device to be part of the Web of Things, but implementing
                it will lead to higher degree of interoperability.
            </p>

            <p class="note">
                An <a>Extended Web Thing</a> fulfills this requirement by definition. In other words, while this
                specification acknowledges the usefulness of the <a>Web Thing</a> level to accommodate legacy devices
                and very restricted scenarios, implementers are encouraged to implement <a title="Extended Web Thing">Extended
                Web Things</a>.
            </p>
        </section>

        <section>
            <h2>R1.4 – A <a>Web Thing</a> SHOULD return a 204 for all write operations</h2>

            <p>
                By default, all PUT, POST, and DELETE requests to a Web Thing should not return the payload of the object that was created/modified, therefore should return a <code>204 NO CONTENT</code> response and no response body. 
            </p>

        </section>

        <section>
            <h2>R1.5 – A <a>Web Thing</a> SHOULD provide a default human-readable documentation</h2>

            <p>
                To interact with a <a>Web Thing</a>, a Client needs to know what resources are available on the Web
                Thing, what they refer to (what is the type/nature of the resources), and how to interact with them. The
                format of the API documentation is left to implementers, but should describe the resources offered, the
                verbs they support, the payloads accepted and returned, and possible status codes that can be returned
                and when.
            </p>


        </section>

    </section>

    <section>
        <h2>Level 2 – MAY</h2>

        <p>
            A <a>Web Thing</a> MAY support these rules, but are not expected to. It depends on the capabilities of the
            devices and other implementation aspects.
        </p>

        <section>
            <h2>R2.1 – A <a>Web Thing</a> MAY support the HTTP <code>OPTIONS</code> verb for each of its resources</h2>

            <p>
                Any resource of a Web Thing should implement the OPTIONS verb to describe what verbs are supported by
                each resource.
            </p>
        </section>

        <section>
            <h2>R2.3 – A <a>Web Thing</a> MAY provide additional representation mechanisms (RDF, XML, JSON-LD)</h2>

            <p>
                A <a>Web Thing</a> MAY provide additional representations of its data and descriptions. JSON being the
                only mandatory representation, the rest of the formats are up to the implementers if needed for
                additional purposes.
            </p>
        </section>

        <section>
            <h2>R2.4 – A <a>Web Thing</a> MAY offer a HTML-based user interface</h2>
            <p>
                A <a>Web Thing</a> MAY expose a  <abbr
                    title="User Interface">UI</abbr> in HTML, CSS and JavaScript. For example, the <abbr
                    title="User Interface">UI</abbr> may be a HTML widget that could be used to integrate the <a>Web
                Thing</a> in dashboard environments.
            </p>
        </section>
        <section>
            <h2>R2.5 – A <a>Web Thing</a> MAY provide precise information about the intended meaning of individual parts of the model</h2>

            <p>
                A <a>Web Thing</a> MAY provide additional meta data to precisely describe the meaning of individual building blocks of a model in a machine-understandable way.
            </p>
        </section>
    </section>
</section>

<section>
    <h2>Web Things model</h2>

    <p>
        This part defines the model, JSON payloads and REST API that an <a>Extended Web Thing</a> MUST implement to
        allow <a title="Client">Clients</a> to discover and use its properties on an automated basis. It assumes an <a
            href="#web-things-integration-pattern">Integration Pattern</a> and that the Web Thing follows the <a
            href="#web-things-requirements">Web Things Requirements</a>.
    </p>

    <p class="note">
        An <a>Extended Web Thing</a> has a root resource accessible via an HTTP URL and supports HTTP <code>GET</code>
        requests on that URL (see <a href="#r0.2-a-web-thing-must-have-a-root-resource-accessible-via-an-http-url"></a>
        and <a href="#r0.6-a-web-thing-must-support-get-on-its-root-url"></a>).
    </p>

    <p>
        An <a>Extended Web Thing</a> MUST create a URL endpoint for all the resources that it exposes (the <a>Web
        Thing</a> itself, but also for <a title="Action">Actions</a> and <a title="Property">Properties</a>) and MUST
        include that URL in the JSON representation whenever possible, using the <code>id</code> field. Relative URLs
        are to be resolved against the URL of the resource that includes them. Implementers are encouraged to create a
        logical tree structure for resources and to use relative URLs to keep JSON payloads short, for instance:
    </p>
    <table>
        <thead>
        <tr>
            <th>URL</th>
            <th>Description</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><code>{wt}</code>
            <td>The root resource URL</td>
        </tr>
        <tr>
            <td><code>{wt}/properties/</code>
            <td>The list of properties</td>
        </tr>
        <tr>
            <td><code>{wt}/properties/{id}</code>
            <td>A specific property</td>
        </tr>
        <tr>
            <td><code>{wt}/actions/</code>
            <td>The list of actions</td>
        </tr>
        <tr>
            <td><code>{wt}/actions/{id}</code>
            <td>A specific action</td>
        </tr>
        <tr>
            <td><code>{wt}/actions/{id}/{actionId}</code>
            <td>A specific, executed instance of an action</td>
        </tr>
        <tr>
            <td><code>{wt}/subscriptions/</code>
            <td>Subscriptions to resources</td>
        </tr>
        <tr>
            <td><code>{wt}/subscriptions/{id}</code>
            <td>A specific subscription</td>
        </tr>
        </tbody>
    </table>


    <section>
        <h2>Common JSON fields</h2>

        <p>
            In response to an HTTP <code>GET</code> request on one of its resources (including the root resource), an
            <a>Extended Web Thing</a> MUST return a JSON representation of that resource that follows the JSON schema
            defined in the table below:
        </p>
        <table>
            <thead>
            <tr>
                <th>Field name</th>
                <th>Type</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><code>id</code></td>
                <td>String</td>
                <td>The URL of this resource following the URI format [[!RFC3986]]. Relative URLs are resolved against
                    the URL of the enclosing resource.
                    <br/><strong>This field is required</strong>.
                </td>
            </tr>
            <tr>
                <td><code>createdAt</code></td>
                <td>String</td>
                <td>Timestamp when this resource was created, following the ISO8601 notation [[!ISO8601]].</td>
            </tr>
            <tr>
                <td><code>updatedAt</code></td>
                <td>String</td>
                <td>Timestamp when this resource was last updated, following the ISO8601 notation [[!ISO8601]].</td>
            </tr>
            <tr>
                <td><code>name</code></td>
                <td>String</td>
                <td>A short human-readable name for the resource.</td>
            </tr>
            <tr>
                <td><code>description</code></td>
                <td>String</td>
                <td>A human-readable description of the resource.</td>
            </tr>
            <tr>
                <td><code>tags</code></td>
                <td>[String]</td>
                <td>An array of tags.</td>
            </tr>
            <tr>
                <td><code>customFields</code></td>
                <td>{"key":"value",...}</td>
                <td>A JSON object with key-value pairs to store custom information about this resource.</td>
            </tr>
            <tr>
                <td><code>links</code></td>
                <td>Object</td>
                <td>A JSON object that lists the sub-resources that this resource links to. See <a href="#links"></a>
                    for details.
                </td>
            </tr>
            </tbody>
        </table>
        <pre class="example" title="Basic JSON payload">
{
  "id": "myCar",
  "name": "My great car",
  "description": "This is such a great car.",
  "createdAt": "2012-08-24T17:29:11.683Z",
  "updatedAt": "2012-08-24T17:29:11.683Z",
  "tags": [
    "cart",
    "device",
    "test"
  ],
  "customFields": {
    "size": "20",
    "color": "blue"
  },
  "links": {
    "properties": {
      "link": "properties/",
      "title": "Properties of this Web Thing."
    },
    "actions": {
      "link": "actions/",
      "title": "Actions of this Web Thing."
    },
    ...
  }
}
        </pre>
        <p>
            The JSON response MAY contain additional fields, depending on the type of resource being considered, check
            the <a href="#resources"></a> for details.
        </p>
    </section>


    <section>
        <h2>Links</h2>

        <p>
            A resource may link to a number of sub-resources. To enable the discovery of these sub-resources (as
            required by the <abbr title="Hypermedia as the Engine of Application State">HATEOAS</abbr> constraint of the
            REST application architecture), an <a>Extended Web Thing</a> SHOULD expose the sub-resources associated with
            a given resource using the HTTP <code>Link</code> header field [[!RFC5988]].
        </p>

        <p>
            In particular, each link is defined by a <strong>relation type</strong> (the "link type"), the actual URL of the sub-resource (the "link"),
            and a human-readable identifier for the relation (the "title"). <a
                href="https://tools.ietf.org/html/rfc5988#section-6.2.2">Relation types</a> defined in [[!RFC5988]] may
            be used to characterize the relation with the sub-resource. Additionally, the Web Things model defines the
            following aditionnal relation types:
        </p>
        <table>
            <thead>
            <tr>
                <th>Relation name</th>
                <th>Description</th>
                <th>Section</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><code>properties</code></td>
                <td>The properties of this resource.</td>
                <td><a href="#properties"></a></td>
            </tr>
            <tr>
                <td><code>actions</code></td>
                <td>The actions that this resource can perform.</td>
                <td><a href="#actions"></a></td>
            </tr>
            <tr>
                <td><code>things</code></td>
                <td>The <a title="Web Thing">Web things</a> proxied by this resource (if applicable).</td>
                <td><a href="#things"></a></td>
            </tr>
            <tr>
                <td><code>subscriptions</code></td>
                <td>The endpoint to manage subscriptions to this resource.</td>
                <td><a href="#subscriptions"></a></td>
            </tr>
            <tr>
                <td><code>product</code></td>
                <td>A link to authoritative product information for this Web Thing.</td>
            </tr>
            <tr>
            <tr>
                <td><code>meta</code></td>
                <td>A link to an external semantic extension for this Web Thing.</td>

            </tr>
            <tr>
                <td><code>model</code></td>
                <td>A link to a <a>Extended Web Thing</a> compliant description of a resource.</td>
                <td><a href="#model"></a></td>
            </tbody>
        </table>

        <p>
            An <a>Extended Web Thing</a> MAY use custom relation types using URLs as described in [[!RFC5988]].
        </p>

        <p>
            In addition to exposing them in the HTTP Header of each resource, links SHOULD be exposed from the
            <a>Model</a> resource of a <a>Extended Web Thing</a> using the <code>links</code> field of the JSON payload.
            The keys of this object represent the relation type while each value describes the actual link as illustrated below.
        </p>
        <pre class="example" title="Links Object JSON Model">
        {
          ...
          "links":{
            "&lt;relType&gt;":{
              "link": "&lt;String&gt;",
              "title": "&lt;String&gt;"
            },
            ...     
          }
          ... 
        }
        </pre>
        <p>
            The following fields define the actual link:
        </p>
        <table>
            <thead>
            <tr>
                <th>Field name</th>
                <th>Type</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><code>link</code></td>
                <td>String</td>
                <td>The URL of the destination of the link.
                    <br/><strong>This field is required.</strong></td>
            </tr>
            <tr>
                <td><code>title</code></td>
                <td>String</td>
                <td>A human-readable label of the destination of the link.
                    <br/><strong>This field is required.</strong></td>
            </tr>
            </tbody>
        </table>
        <pre class="example" title="Links Object JSON Example">
          {
              "properties": {
                "link": "properties/",
                "title": "Properties of this Web Thing."
              },
              "actions": {
                "link": "actions/",
                "title": "Actions of this Web Thing."
              },
              "product": {
                "link": "http://api.evrythng.com/products/xyz",
                "title": "Product this Web Thing is an instance of"
              },
              "meta": {
                "link": "http://webofthings.org/schemas/web-thing/",
                "title": "Metadata"
              },
              "help": {
                "link": "http://webofthings.org/docs/pi/",
                "title": "Documentation"
              },
              "ui": {
                "link": "ui/",
                "title": "User Interface"
              },
              "_myCustomLinkRelType": {
                "link": "custom/",
                "schema": "http://webofthings.org/schemas/custom.html",
                "title": "My custom resource"
              },
              "_..." : {"..." : {"..."}}
          }
        </pre>

        <p>
            A <code>GET</code> on any resource of a Web Thing should return the list of all related resources as "Link" HTTP headers, which allows to use the same standard model regardless of the representation chosen. This is an example of the headers returned after a <code>GET {wt}/</code> on the root URL of a Web Thing:
        </p>

        <pre class="example" title="Links in the HTTP Header">
            Link: &lt;properties/&gt;; rel="properties"
            Link: &lt;actions/&gt;; rel="actions"
            Link: &lt;product/&gt;; rel="product"
            Link: &lt;meta/&gt;; rel="meta"
            Link: &lt;help/&gt;; rel="help"
            Link: &lt;ui/&gt;; rel="ui"
        </pre>


    </section>

    <section>
        <h2>Values</h2>

        <p>
            Several resources support values (particularly <a title="Action">Actions</a> and <a title="Property">Properties</a>).
            A <code>values</code> object contains the description of a set of values identified by their name. The
            description includes the value type, unit, and possible concrete values that the value can take. A <code>values</code>
            object is typically used to define the parameters a <a>Client</a> can use when it issues an <a>Action</a> or
            accesses the channels of a <a>Property</a>.
        </p>

        <p>
            The following fields MAY be used to describe a value:
        </p>
        <table>
            <thead>
            <tr>
                <th>Field name</th>
                <th>Type</th>
                <th>Description</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td><code>&lt;valueName&gt;</code></td>
                <td>String</td>
                <td>The identifier of this value <br/><strong>This field is required</strong>.</td>
            </tr>
            <tr>
                <td><code>name</code></td>
                <td>String</td>
                <td>A human-readable caption for this value.</td>
            </tr>
            <tr>
                <td><code>description</code></td>
                <td>String</td>
                <td>A human-readable description of this value.</td>
            </tr>
            <tr>
                <td><code>type</code></td>
                <td>String</td>
                <td>The type of this value. The supported types are <code>integer</code>, <code>float</code>, <code>boolean</code>,
                    <code>string</code>.
                </td>
            </tr>
            <tr>
                <td><code>unit</code></td>
                <td>String</td>
                <td>The unit of this value, using one of the full names defined in the International System of Units
                    [[!SI]].
                    <br/>Example: <code>"meter per second squared"</code></td>
            </tr>
            <tr>
                <td><code>required</code></td>
                <td>Boolean</td>
                <td>Specifies whether this value is required or optional. If omitted, the default is <code>true</code>.
                </td>
            </tr>
            <tr>
                <td><code>minValue</code></td>
                <td>Number</td>
                <td>The minimal concrete value that this value can take.</td>
            </tr>
            <tr>
                <td><code>maxValue</code></td>
                <td>Number</td>
                <td>The maximal concrete value of this value</td>
            </tr>
            <tr>
                <td><code>enum</code></td>
                <td>Object</td>
                <td>Specifies a set of concrete values that this value can take, e.g.
                    <br/><code>{"LOCK":"Locks the door.", "UNLOCK":"unlocks the door."}</code></td>
            </tr>
            </tbody>
        </table>
        <pre class="example" title="Values object model">
          {
            ...
            "values": {
              "&lt;valueName&gt;":{
                "name":"&lt;String&gt;",
                "description":"&lt;String&gt;",
                "type":"&lt;String&gt;",
                "unit":"&lt;String&gt;",
                "required":"&lt;Boolean&gt;",
                "minValue":"&lt;Numeric&gt;",
                "maxValue":"&lt;Numeric&gt;"
              },
              ...
            }
            ...
          }
        </pre>
        <p>
            The value name <code>timestamp</code> is reserved. An <a>Extended Web Thing</a> MUST append a <code>timestamp</code>
            set to the current date and time whenever it creates a value unless that <code>timestamp</code> is already
            provided. The <code>timestamp</code> field follows the ISO8601 notation [[!ISO8601]]. The
            <code>createdAt</code> is different from <code>timestamp</code> because it used to refer when a resource has
            been created (server side information only), whereas the <code>timestamp</code> indicates when a value
            (property) has been measured (by the client or the Web Thing).
        </p>
    </section>

    <section>
        <h2>Resources</h2>

        <section>
            <h2>HTTP verbs support</h2>

            <p>
                Ideally, an <a>Extended Web Thing</a> SHOULD support all end-points. The letters <code>D,G,C</code> refer to <a href="#web-things-integration-patterns"></a> and is here as an indication of which type of integration would typically implement these resources. A <code>D</code> means that the resource should be implemented on Web Things using the the <a>Direct</a> integration pattern, a <code>G</code> means the resource should be implemented when using the <a>Gateway</a> integration pattern, a <code>C</code> means the resource should be implemented when using the <a>Cloud</a> integration pattern.

                The target column in the table
                below refers to <a href="#web-things-integration-patterns"></a> and is here as an indication of which
                type of Thing would typically implement these end points.
            </p>

            <p class="note">
                The URLs used in this table are indicative as an <a>Extended Web Thing</a> may choose to use
                other URLs for them. The actual URLs are to be reported in the representation of the in
                <code>Link</code> HTTP Headers and in the JSON <code>links</code> field as described in <a
                    href="#links"></a> of the <a>Model</a> resource.
            </p>
            <table width="800">
                <thead>
                <tr>
                    <th>REST URL</th>
                    <th>POST</th>
                    <th>GET</th>
                    <th>PUT</th>
                    <th>DELETE</th>
                    <th>OPTIONS</th>
                    <th>Details</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td><code>{wt}</code></td>
                    <td>G,C</td>
                    <td>D,G,C</td>
                    <td>D,G,C</td>
                    <td>G,C</td>
                    <td>D,G,C</td>
                    <td><a>Thing Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/subscriptions</code></td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>D,G,C</td>
                    <td><a>Subscriptions Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/model</code></td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>G,C</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td><a>Model Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/properties</code></td>
                    <td>G,C</td>
                    <td>D,G,C</td>
                    <td>-</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td><a>Properties Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/properties/{id}</code></td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>G,C</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td><a>Properties Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/actions</code></td>
                    <td>G,C</td>
                    <td>D,G,C</td>
                    <td>-</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td><a>Actions Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/actions/{id}</code></td>
                    <td>D,G,C</td>
                    <td>D,G,C</td>
                    <td>-</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td><a>Actions Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/actions/{id}/{actionId}</code></td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>-</td>
                    <td>D,G,C</td>
                    <td>D,G,C</td>
                    <td><a>Actions Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/things</code></td>
                    <td>G,C</td>
                    <td>G,C</td>
                    <td>-</td>
                    <td>-</td>
                    <td>G,C</td>
                    <td><a>Things Resource</a></td>
                </tr>
                <tr>
                    <td><code>{wt}/things/{id}</code></td>
                    <td>-</td>
                    <td>G,C</td>
                    <td>G,C</td>
                    <td>G,C</td>
                    <td>G,C</td>
                    <td><a>Things Resource</a></td>
                </tr>
                </tbody>
            </table>
        </section>
        <section>
            <h2>Web <dfn>Thing Resource</dfn></h2>

            <p>
                A <a>Web Thing</a> (<dfn>Thing</dfn> hereafter) is the virtual representation of a physical object. It is the root resource of the Web
                Things model.
            </p>

            <p>
                The <dfn>Thing URL</dfn> is either the root URL of the API or, in the case of a proxy for other Things,
                the result of resolving the <code>id</code> returned in the representation of the <a>Things</a>
                resource.
            </p>
            <section>
                <h2>Retrieve a Thing</h2>

                <p>
                    In response to an HTTP <code>GET</code> request on the root URL of a <code>Thing</code>, an <a>Extended Web Thing</a> MUST return an object that its representation.
                </p>
            <pre class="example" title="Get the Root Resource of a Web Thing">
            --&gt; REQUEST
            GET {wt}
 
            &lt;-- RESPONSE
            200 OK
            Link: &lt;model/&gt;; rel="model"
            Link: &lt;properties/&gt;; rel="properties"
            Link: &lt;actions/&gt;; rel="actions"
            Link: &lt;product/&gt;; rel="product"
            Link: &lt;meta/&gt;; rel="meta"
            Link: &lt;help/&gt;; rel="help"
            Link: &lt;ui/&gt;; rel="ui"
            Link: &lt;_myCustomLinkRelType/&gt;; rel="_myCustomLinkRelType"

            {
              "id": "myCar",
              "name": "My super great car",
              "description": "This is such a great car.",
              "createdAd": "2012-08-24T17:29:11.683Z",
              "updatedAd": "2012-08-24T17:29:11.683Z",
              "tags":["cart", "device", "test"],
              "customFields":{
                  "size": "20",
                  "color":"blue"
              }
            }
            </pre>
            </section>
            <section>
                <h2>Update a Thing</h2>

                <p>
                    In response to an HTTP <code>PUT</code> request on a <a>Thing URL</a> with a Thing object as
                    request body, an <a>Extended Web Thing</a> MUST either reject the request with the appropriate
                    status code (e.g. because the <a>Client</a> is unauthenticated or because the <a>Thing</a> is
                    read-only) or store the provided value(s) by updating the <a>Thing</a>. Partial updates
                    are authorized and result in updating the fields that were provided in the request body.
                </p>
            <pre class="example" title="Update my super great car">
            --&gt; REQUEST
            PUT {wt}
    
            {
              "name":"My really super great car"
            }

            &lt;-- RESPONSE
            204 NO CONTENT
            </pre>
            </section>
            <section>
                <h2><dfn>Model Resource</dfn></h2>

                <p>
                    A <a>Model</a> describes the values of <code>properties</code> and <code>actions</code> that can
                    be
                    performed on <a>Things</a>.
                </p>

                <p>
                    The <dfn>Model URL</dfn> is the result of resolving the <code>id</code> returned in the
                    representation of a <a>Property</a> against the destination URL of the <code>properties</code> link
                    that
                    gave birth to it.
                </p>

                <section>
                    <h2>Retrieve the model of a <a>Thing</a></h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a <code>model</code>
                        link, an <a>Extended Web Thing</a> MUST return an object containing the model of the Thing.
                    </p>
            <pre class="example" title="Model of a Thing">
                --&gt; REQUEST
                GET {wt}/model

                &lt;-- RESPONSE
                200 OK

                {
                  "id":"pi",
                  "name": "My WoT Raspberry PI",
                  "description": "A simple WoT-connected Raspberry PI for the WoT book.",
                  "tags": ["raspberry","pi","WoT"],
                  "links":{
                    "product": {
                      "link" : "https://www.raspberrypi.org/products/raspberry-pi-2-model-b/",
                      "title" : "Product this Web Thing is based on"
                    },
                    "properties": {
                      "link" : "http://w3c.org/schemas/properties/",
                      "title" : "List of Properties",
                      "resources":[
                        {
                          "id":"temperature",
                          "name": "Temperature Sensor",
                          "description": "An ambient temperature sensor.",
                          "values":{
                            "temp":{
                              "name":"Temperature sensor",
                              "description":"The temperature in celsius",
                              "unit":"celsius",
                              "value": 0,
                              "customFields":{
                                "gpio": 21
                              }
                            }
                          },
                          "tags":["sensor","public","temperature"]
                        },
                        {
                          "id":"humidity",
                          "name": "Humidity Sensor",
                          "description": "An ambient humidity sensor.",
                          "values":{
                            "h":{
                              "name":"Humidity",
                              "description":"Percentage of Humidity",
                              "unit": "%",
                              "value": 0,
                              "customFields":{
                                "gpio": 21
                              }
                            }
                          },
                          "tags":["sensor","public"]
                        },
                        {
                          "id":"pir",
                          "name": "Passive Infrared",
                          "description": "A passive infrared sensor.",
                          "values":{
                            "p":{
                              "name":"Presence",
                              "description":"Current sensor value (true=motion detected)",
                              "type":"boolean",
                              "value": false,
                              "customFields":{
                                "gpio": 20
                              }
                            }
                          },
                          "tags":["sensor","public"]
                        },
                        {
                          "id":"leds",
                          "name": "LEDs",
                          "description": "The LEDs of this device.",
                          "values":{
                            "1": {
                              "name": "LED 1",
                              "value": false,
                              "customFields":{
                                "gpio": 17
                              }
                            },
                            "2": {
                              "name": "LED 2",
                              "value": false,
                              "customFields":{
                                "gpio": 19
                              }
                            }
                          },
                          "tags":["sensor","public"]
                        }
                      ]
                    },
                    "actions":{
                      "link": "http://w3c.org/schemas/actions/",
                      "title": "Actions of this Web Thing",
                      "resources":[
                        {
                          "id":"displayText",
                          "name":"Display text on the LCD screen",  
                          "values":{
                            "text":{
                              "type":"String",
                              "required":true
                            },
                            "delay":{
                              "type":"Integer",
                              "minValue":30,
                              "maxValue":1800,
                              "unit":"seconds"
                            }
                          }
                        }
                      ]
                    },
                    "meta": {
                      "link": "http://w3c.org/schemas/webthing/",
                      "title": "Metadata"
                    },
                    "help": {
                      "link": "http://webofthings.org/docs/pi/",
                      "title": "Documentation"
                    },
                    "ui": {
                      "link": "ui/",
                      "title": "User Interface"
                    }
                  }
                }
            </pre>
                </section>
                <section>
                    <h2>Update the model of a <a>Thing</a></h2>

                    <p>
                        In response to an HTTP <code>PUT</code> request on a <a>Model URL</a> with a Model object as
                        request body, an <a>Extended Web Thing</a> MUST either reject the request with the appropriate
                        status code (e.g. because the <a>Client</a> is unauthenticated or because the <a>Model</a> is
                        read-only) or store the provided value(s) by updating the <a>Model</a>. Partial updates
                        are authorized and result in updating the fields that were provided in the request body.
                </section>
            </section>
            <section>
                <h2><dfn>Properties Resource</dfn></h2>

                <p>
                    A <a>Property</a> keeps track of a set of variables about a device (its location, the temperature
                    sensor
                    reading, etc.).
                </p>

                <p>
                    The <dfn>Property URL</dfn> is the result of resolving the <code>id</code> returned in the
                    representation of a <a>Property</a> against the destination URL of the <code>properties</code> link
                    that
                    gave birth to it.
                </p>

                <section>
                    <h2>Retrieve a list of properties</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a
                        <code>properties</code>
                        link, an <a>Extended Web Thing</a> MUST return an array of <a>Property</a> that the initial
                        resource
                        contains.
                    </p>
            <pre class="example" title="List of properties">
              --&gt; REQUEST
              GET {wt}/properties


              &lt;-- RESPONSE
              200 OK
              Link: &lt;http://webofthings.io/properties&gt;; rel="meta"

              [
                {
                  "id":"temperature",
                  "name":"Kitchen Temperature Sensor",
                  "values":{
                    "temp":22,
                    "timestamp":"2015-06-14T14:30:00.000Z"
                  }  
                },
                {
                  "id":"status",
                  "name":"Device Status",
                  "values":{
                    "status":"OK",
                    "timestamp":"2015-06-14T14:30:00.000Z"
                  }  
                },
                {
                  "id":"acceleration",
                  "name":"Acceleration",
                  "values":{
                    "x":22,
                    "y":22.56,
                    "z":1.4,
                    "timestamp":"2015-06-14T14:30:00.000Z"
                  }
                },
                {
                  "id":"engineAngle",
                  "name":"Engine Angle",
                  "values":{
                    "theta":2,
                    "rho":-0.1,
                    "timestamp":"2015-06-14T14:30:00.000Z"
                  }  
                }
              ]
            </pre>
                </section>

                <section>
                    <h2>Retrieve the value of a property</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on a <a>Property URL</a>, an <a>Extended Web
                        Thing</a> MUST return an array that lists recent values of that <a>Property</a>.
                    </p>

                    <p class="note">
                        Some Web Things might not store the history of sensor readings but only the most recent value of a given property, in which case the array will always contain one object. However, Web Things on clouds and gateway are likely to store many past values of the property, in which case they can
                        be retrieved using pagination and filters.
                    </p>

                    <p class="issue" title="@vladounet">
                        Describe how pagination and last/filtered contents would work.
                    </p>
            <pre class="example" title="Retrieve the last measures of an accelerometer property">
              --&gt; REQUEST
              GET {wt}/properties/acceleration

              &lt;-- RESPONSE
              200 OK
              Link &lt;model/&gt;; rel="model"

              [
                {
                  "x":11,
                  "y":1,
                  "z":-4.4,
                  "timestamp":"2015-06-14T14:30:00.000Z"
                },
                {
                  "x":3.4,
                  "y":-1,
                  "z":-4.6,
                  "timestamp":"2015-06-14T14:00:00.000Z"
                }
              ]
            </pre>
                </section>

                <section>
                    <h2>Retrieve the description of a specific property</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a <code>model</code>
                        link
                        exposed by a <a>Property</a>, an <a>Extended Web Thing</a> MUST return the description of the
                        <a>Property</a>.
                        On top of <a href="#common-json-fields"></a>, the JSON representation used to describe a
                        <a>Property</a> includes the following fields:
                    </p>
                    <table>
                        <thead>
                        <tr>
                            <th>Field name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td><code>values</code></td>
                            <td>Object</td>
                            <td>A description of the set of values that this resource contains.
                                <br/>See <a href="#values"></a>.
                                <br/><strong>This field is required.</strong></td>
                        </tr>
                        </tbody>
                    </table>
            <pre class="example" title="Property Model Example">
              --&gt; REQUEST
              GET {wt}/properties/acceleration/

              &lt;-- RESPONSE
              200 OK
              Link: &lt;http://webofthings.org/properties/acceleration&gt;; rel="meta"

              {
                "id":"acceleration",
                "name": "Acceleration",
                "description": "A 3D acceleration sensor.",
                "values":{
                  "x":{
                    "name":"Y-axis",
                    "description":"The X dimension of the sensor",
                    "unit":"meter per second squared"
                  },
                  "y":{
                    "name":"Y-axis",
                    "description":"The Y dimension of the sensor",
                    "unit":"meter per second squared"
                  },
                  "z":{
                    "name":"Z-axis",
                    "description":"The Z dimension of the sensor",
                    "unit":"meter per second squared"
                  }
                },
                "tags":["sensor","public"]
              }
            </pre>
                    <p class="note">
                        Usually, the model will be hardcoded in the device and generally cannot be altered by clients. If Web Things is hosted on a cloud service, the model model of a <a>Property</a> can be updated by sending an HTTP <code>PUT</code> request to the same URL, with the new model document in the request body.
                    </p>

                </section>

                <section>
                    <h2>Update a specific property</h2>

                    <p>
                        In response to an HTTP <code>PUT</code> request on a <a>Property URL</a> with an array of
                        values as
                        request body, an <a>Extended Web Thing</a> MUST either reject the request with the appropriate
                        status code (e.g. because the <a>Client</a> is unauthenticated or because the <a>Property</a> is
                        read-only) or store the provided value(s) as new values for the <a>Property</a>. The body of the request SHOULD always be an array of values (at least one), which allows to send several property value updates within a single request. 
                    </p>
            <pre class="example" title="Update the Values of the Temperature Property">
              --&gt; REQUEST
              PUT {wt}/properties/temperature/

              [
                {
                  "temp":24
                }
              ]


              &lt;-- RESPONSE
              204 NO CONTENT
              Location: {wt}/properties/temperature/
            </pre>

                    <p class="note">
                        A <a>Property URL</a> is always a collection of resources, therefore its representation is an array of individual values with different timestamps. The individual values are not adressable individually, therefore the <code>Location:</code> header in response to a successful property update request SHOULD always be the <a>Property URL</a> itself. 
                    </p>

                </section>

                <section>
                    <h2>Update multiple properties at once</h2>

                    <p>
                        In response to an HTTP <code>POST</code> request on the destination URL of a <code>properties</code>
                        link, an <a>Extended Web Thing</a> MUST either reject the request with the appropriate status
                        code
                        or store the provided values as new values for each of the provided <a
                            title="Property">Properties</a>.
                    </p>
            <pre class="example" title="Update multiple properties at once">
              --&gt; REQUEST
              PUT {wt}/properties/

              [
                {
                  "id":"temperature",
                  "value":{
                    "temp":24,
                    "timestamp":"2015-06-14T14:30:00.000Z"
                  }
                },
                {
                  "id":"acceleration",
                  "value":{
                    "x":-22,
                    "y":2.1,
                    "z":3,
                  }
                }
              ]

              &lt;-- RESPONSE
              204 NO CONTENT
              Location: {wt}/properties/
            </pre>
                </section>
            </section>

            <section>
                <h2><dfn>Actions Resource</dfn></h2>

                <p>
                    On top of <a href="#common-json-fields"></a>, the JSON representation used to describe an
                    <a>Action</a>
                    includes the following fields:
                </p>
                <table>
                    <thead>
                    <tr>
                        <th>Field name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>values</code></td>
                        <td>Object</td>
                        <td>A description of the parameters that his action accepts.
                            <br/>See <a href="#values"></a>.
                            <br/><strong>This field is required.</strong></td>
                    </tr>
                    </tbody>
                </table>
                <p>
                    The <dfn>Action URL</dfn> is the result of resolving the <code>id</code> returned in an
                    <a>Action</a>
                    description against the destination URL of the <code>actions</code> link that gave birth to it.
                </p>

                <section>
                    <h2>Retrieve a list of actions</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of an
                        <code>actions</code>
                        link exposed by a resource, an <a>Extended Web Thing</a> MUST return an array of <a>Action</a>
                        descriptions that the initial resource may achieve.
                    </p>
            <pre class="example" title="List of actions">
              --&gt; REQUEST
              GET {wt}/actions


              &lt;-- RESPONSE
              200 OK
              Link: &lt;http://webofthings.org/actions/upgradefirmware&gt;; rel="meta"

              [
                {
                  "id":"upgradeFirmware",
                  "name":"Upgrade Device Firmware"  
                },
                {
                  "id":"reboot",
                  "name":"Reboot"  
                }
              ]
            </pre>
                </section>

                <section>
                    <h2>Retrieve recent executions of a specific action</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on an <a>Action URL</a>, an <a>Extended Web
                        Thing</a> MUST return an array that lists the recent executions of a specific <a>Action</a>.
                    </p>

                    <p>
                        On top of <a href="#common-json-fields"></a>, the JSON representation used to describe the
                        execution
                        of an <a>Action</a> includes the following fields:
                    </p>
                    <table>
                        <thead>
                        <tr>
                            <th>Field name</th>
                            <th>Type</th>
                            <th>Description</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>status</td>
                            <td>String</td>
                            <td>The execution status. One of <code>pending</code>, <code>executing</code>,
                                <code>completed</code> or <code>failed</code></td>
                        </tr>
                        </tbody>
                    </table>
            <pre class="example" title="Retrieve the recent executions of a specific action">
              --&gt; REQUEST
              GET {wt}/actions/upgradefirmware

              &lt;-- RESPONSE
              200 OK
              Link: &lt;http://webofthings.org/actions/upgradefirmware&gt;; rel="meta"
              Link: &lt;model/&gt;; rel="model"

              [
                {
                  "id":"223",
                  "value":{
                    "delay":30,
                    "mode":"SOFT"
                  },
                  "status":"executing"
                  "timestamp":"2015-06-14T18:33:25.938Z"
                },
                {
                  "id":"222",
                  "value":{
                    "delay":60,
                    "mode":"FORCE"
                  },
                  "status":"completed"
                  "timestamp":"2015-06-14T14:22:23.233Z"
                }
              ]
            </pre>
                </section>

                <section>
                    <h2>Retrieve the description of a specific action</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a <code>model</code> link
                        exposed by an <a>Action</a>, an <a>Extended Web Thing</a> MUST return the description of the <a>Action</a>.
                        The JSON representation should be the same as the one returned for that <a>Action</a> in <a
                            href="#retrieve-a-list-of-actions"></a>.
                    </p>
            <pre class="example" title="Retrieve the Model of an Action Type">
                --&gt; REQUEST
                GET {wt}/actions/upgradefirmware/model

                &lt;-- RESPONSE
                200 OK

                {
                    "id":"upgradeFirmware",
                    "name":"Upgrade Device Firmware",  
                    "description":"Loads a new firmware from the cloud and installs it.",
                    "values": {
                        "delay":{
                            "name":"Upgrade Delay",
                            "type":"integer",
                            "required":true,
                            "minValue":0,
                            "maxValue":120,
                            "unit":"seconds"
                        },
                        "url":{
                            "name":"Firmware URL",
                            "description":"The URL to get the firmware from (should contain the credentials).",
                            "required":true,
                            "type":"string"
                        },
                        "requester":{
                            "name":"Request User ID",
                            "description":"Your user ID (optional) ",
                            "type":"string"
                        }
                    },
                    "customFields":{
                        "permission":"admin",
                        "priority":"high"
                    }   
                }
            </pre>
                    <p>
                        If allowed by the device, a <a>Client</a> can update the model of an <a>Action</a> by sending an HTTP <code>PUT</code> request to the same URL, with the new document as request body.
                    </p>
                </section>

                <section>
                    <h2>Execute an action</h2>

                    <p>
                        In response to an HTTP <code>POST</code> request on an <a>Action URL</a> with valid parameters
                        as
                        request body, an <a>Extended Web Thing</a> MUST either reject the request with the appropriate
                        status code or queue a task to run the action and return the status of that action in a <code>201
                        Created</code> response. The action may not run immediately. The <code>Location</code> HTTP
                        header
                        identifies the URL to use to pull for updates on the action's status.
                    </p>

                    <p class="note">
                        This is how a <a>Client</a> sends a command to a device.
                    </p>
            <pre class="example" title="Schedule a reboot">
              --&gt; REQUEST
              POST {wt}/actions/reboot

              {
                "delay":50,
                "mode":"debug"
              }

              &lt;-- RESPONSE
              204 NO RESPONSE
              Location: {wt}/actions/reboot/233
            </pre>
                </section>

                <section>
                    <h2>Retrieve the status of an action</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the URL targeted by the <code>Location</code>
                        HTTP header returned in response to the request to execute an action, an <a>Extended Web
                        Thing</a>
                        MUST return the status of this action or a <code>404 Not Found</code> status code if the
                        action's
                        status is no longer available.
                    </p>

                    <pre class="example" title="See a Reboot Action">
                      --&gt; REQUEST
                      GET {wt}/actions/reboot/233

                      &lt;-- RESPONSE
                      200 OK

                      {
                        "id":"233",
                        "value":{
                          "delay":50,
                          "mode":"debug"
                        },
                        "status":"executing",
                        "timestamp":"2015-06-14T14:30:00.000Z"
                      }
                    </pre>

                </section>
            </section>


            <section>
                <h2><dfn>Things Resource</dfn></h2>

                <p>
                    A <a>Web Thing</a> may proxy other <a title="Web Thing">Web Things</a> via the Things resource. For instance, it is expected
                    that gateways and cloud services will proxy a number of third party devices. On top of <a
                        href="#common-json-fields"></a>, the JSON representation used to describe a link to another
                    thing
                    includes the following fields:
                </p>
                <table>
                    <thead>
                    <tr>
                        <th>Field name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>rootUrl</code></td>
                        <td>String</td>
                        <td>The URL of the root resource of the Web Thing if it is different from
                            <code>{wt}/thing/{id}</code></td>
                    </tr>
                    </tbody>
                </table>

                <section>
                    <h2>Retrieve a list of things</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a <code>things</code>
                        link, an <a>Extended Web Thing</a> MUST return an array of things descriptions.
                    </p>
                    <pre class="example" title="List of things proxied by a device">
                    --&gt; REQUEST
                    GET {wt}/things
                                
                    &lt;-- RESPONSE
                    200 OK

                    [
                      {
                        "id":"982tjqogeih",
                        "name":"Shopping Cart"
                      },  
                      {
                        "id":"2398h87wt489foz",
                        "name":"Shopping Cart",
                        "rootUrl":"/pi",
                        "description":"Shopping Cart that updates its location as it moves"
                      },  
                      {
                        "id":"p9qrnc89w48oh",
                        "name":"Shopping Cart",
                        "rootUrl":"https://192.168.0.6/",
                        "description":"LAN-connected gateway to Lamp #4."
                      }
                    ]
                    </pre>
                    <p class="note">
                        The <code>id</code> can be interpreted as a URL, but if a Web Thing can be directly accessed without the proxy, the <code>rootUrl</code> can be used to provide a different Root URL.
                    </p>

                </section>

                <section>
                    <h2>Add a Thing to a Proxy</h2>

                    <p>
                        Clients can add new Things to be proxied by a Web Thing (especially for gateways/cloud) using an HTTP <code>POST</code> request on the <a>Things URL</a> of a <code>Web Thing</code> and by sending in the request body the root resource representation of the Thing to be proxied.
                    </p>
                    <pre class="example" title="List of things proxied by a device">
                    --&gt; REQUEST
                    POST {wt}/things

                    {
                      "id":"p9qrnc89w48oh",
                      "name":"Shopping Cart",
                      "rootUrl":"https://192.168.0.6/",
                      "description":"LAN-connected gateway to Lamp #4."
                    }
                                
                    &lt;-- RESPONSE
                    204 NO CONTENT
                    Location: {wt}/things/p9qrnc89w48oh
                    </pre>
                </section>
            </section>

            <section>
                <h2><dfn>Subscriptions Resource</dfn></h2>
                <p>All resources can be subscribed to but in particular, an <a>Extended Web Thing</a> SHOULD enable subscriptions to <a title="Action">Actions</a> and <a title="Property">Properties</a>. Subscriptions allows for a <a>Client</a> to be notified via a push event whenever the state of an observed resources changes.

                    <!--<section>-->
                    <h2>Create a subscription</h2>

               An <a>Extended Web Thing</a> SHOULD support subscriptions via the WebSocket [[!RFC6455]] protocol and MAY support subscriptions via WebHooks (HTTP callbacks). Subscriptions are enabled via the HTTP protocol upgrade mechanism [[!RFC2616]] as shown below
                </p>
                <figure>
                    <img src="subscriptions.png"
                         alt="Clients can subscribe to resources via a protocol upgrade."
                         width="600"/>
                    <figcaption>Client subscription to a resource via a protocol upgrade, first via Websocket, second via a Webhook (HTTP callback).</figcaption>
                </figure>

                To subscribe to a resource the following HTTP headers should be provided via a GET request (e.g., on <code>/properties/temp</code>).
                </p>
                <table>
                    <thead>
                    <tr>
                        <th>Header name</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>Upgrade</code></td>
                        <td>The protocol that should be used for the subscription, one of
                            <code>webhook</code> or <code>websocket</code>
                            <br/><strong>This header is required.</strong></td>
                    </tr>
                    <tr>
                        <td><code>Callback</code></td>
                        <td>The callback URL to which updates should be pushed.
                            <code>webhook</code> or <code>websocket</code>
                            <br/><strong>This header is required in the case of a <code>webhook</code> subscription.</strong></td>
                    </tr>
                </table>
               <p> In response to a HTTP <code>GET</code> request on the destination URL of a resource, an <a>Extended Web Thing</a> MUST either reject the request with an appropriate status code or MUST return a <code>101 Switching Protocol</code> response for a subscription via Websocket or a <code>200 OK</code> for a subscription via Webhook. In both cases the following headers must be returned (on top of the protocol specific headers):</p>
                <table>
                    <thead>
                    <tr>
                        <th>Header name</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>Subscription-ID</code></td>
                        <td>The identifier of the subscription
                        <br/><strong>This header is required.</strong></td>
                    </tr>
                </table>

                <section>
                    <h2>Subscription resource</h2>
                <p>
                    The <dfn>Subscription resource</dfn> allows to list current subscriptions to resources as well as cancelling a subscription. Such a resource is accessible via the root URL of the <a>Extended Web Thing</a></p>

                <p>
                    On top of <a href="#common-json-fields"></a>, the JSON representation used to describe a subscription includes the following fields:
                </p>
                <table>
                    <thead>
                    <tr>
                        <th>Field name</th>
                        <th>Type</th>
                        <th>Description</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td><code>subscriberId</code></td>
                        <td>String</td>
                        <td>A unique identifier for the subscriber
                            <br/><strong>This field is required.</strong></td>
                    </tr>
                    <tr>
                        <td><code>type</code></td>
                        <td>String</td>
                        <td>The type of connection used to exchange updates with the subscriber. One of
                            <code>httpCallback</code> or <code>websockets</code></td>
                    </tr>
                    <tr>
                        <td><code>resource</code></td>
                        <td>String</td>
                        <td>The URL of the resource whose changes the subscriber is subscribed to.</td>
                    </tr>
                    </tbody>
                </table>

                <section>
                    <h2>Retrieve a list of subscriptions</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on the destination URL of a
                        <code>subscriptions</code> link, an <a>Extended Web Thing</a> MUST return the array of
                        subscriptions to the underlying resource.
                    </p>
            <pre class="example" title="List of subscriptions">
            [
              {
                "id":"2349",
                "type":"webhook",
                "resource":"/properties/temperature",
                "callbackUrl":"http://www.compose-project.eu/so/ServiceObject-123213213/callback"
              },
              {
                "id":"2350",
                "subscriberId":"ServiceObject-123213213",
                "type":"websocket",
                "resource":"/properties/location"
              }
            ]
            </pre>
                    <p>
                        The <dfn>Subscription URL</dfn> is the result of resolving the <code>id</code> returned in a <a>Subscription
                        resource</a> description against the destination URL of the <code>subscriptions</code> link that
                        gave birth to it.
                    </p>
                </section>

                <section>
                    <h2>Retrieve information about a specific subscription</h2>

                    <p>
                        In response to an HTTP <code>GET</code> request on a <a>Subscription URL</a>, an <a>Extended Web
                        Thing</a> MUST return a JSON representation of the subscription. The JSON representation should
                        be
                        the same as the one returned for that subscription in <a
                            href="#retrieve-a-list-of-subscriptions"></a>.
                    </p>
            <pre class="example" title="Retrieve information about a specific subscription">
              {
                "id":"2349",
                "type":"webhook",
                "resource":"/properties/temperature",
                "callbackUrl":"http://www.compose-project.eu/so/ServiceObject-123213213/callback"
              }
            </pre>
                </section>

                <section>
                    <h2>Delete a subscription</h2>

                    <p>
                        In response to an HTTP <code>DELETE</code> request on the destination URL of a
                        <code>subscriptions</code> an <a>Extended
                        Web Thing</a> MUST either reject the request with an appropriate status code or remove (unsubscribe) the
                        subscription and return a <code>200 OK</code> status code.
                    </p>
                </section>
            </section>
        </section>
    </section>
    <!--</section>-->

    <section class="appendix">
        <h1>Examples</h1>

        <section>
            <h2>Extended Web Thing</h2>

            <p>Here is a possible representation of the root resource of an <a>Extended Web Thing</a>:</p>
        <pre class="example" title="Web Thing root resource">
          HTTP Link headers:
          Link: &lt;properties/&gt;; rel="properties"
          Link: &lt;actions/&gt;; rel="actions"
          Link: &lt;meta/&gt;; rel="meta"
          Link: &lt;help/&gt;; rel="help"
          Link: &lt;ui/&gt;; rel="ui"

          JSON response:
          {
            "id":"cart1",
            "createdAt":"2012-08-24T17:29:11.683Z", 
            "updatedAt":"2012-08-24T17:29:11.683Z", 
            "name":"Shopping Cart",
            "description":"Shopping Cart that updates its location as it moves",
            "tags":["cart","device","test"],
            "customFields":{"size":"20","color":"blue"}
          }
        </pre>
        </section>
    </section>

    <section>
        <h1>Acknowledgments</h1>

        <p>
            This work is supported by the European Union's 7th Research Framework Programme (FP7/2013-2015) under grant
            agreement nº317862 – <a href="http://www.compose-project.eu/">COMPOSE</a>).
        </p>

        <p>
            The authors would like to thank the participants of the <a href="http://www.w3.org/WoT/IG/">W3C Web of
            Things
            Interest Group</a> and of the <a href="http://www.webofthings.org">Web of Things online community</a> who have provided feedback on initial drafts of this submission.
        </p>
    </section>
        </section>
    </section>
</body>
</html>
